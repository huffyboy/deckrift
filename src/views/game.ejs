<div class="game-container">
    <!-- Game Header -->
    <div class="game-header">
        <div class="row">
            <div class="col-md-3">
                <div class="game-stat">
                    <h5>Health</h5>
                    <div class="health-bar">
                        <div class="health-fill" style="width: <%= (gameState.health / gameState.maxHealth) * 100 %>%"></div>
                    </div>
                    <span><%= gameState.health %>/<%= gameState.maxHealth %></span>
                </div>
            </div>
            <div class="col-md-3">
                <div class="game-stat">
                    <h5>Currency</h5>
                    <span class="currency-value"><%= gameState.currency %></span>
                </div>
            </div>
            <div class="col-md-3">
                <div class="game-stat">
                    <h5>Realm</h5>
                    <span><%= gameState.realmName %></span>
                </div>
            </div>
            <div class="col-md-3">
                <div class="game-stat">
                    <h5>Level</h5>
                    <span><%= gameState.level %></span>
                </div>
            </div>
        </div>
    </div>

    <!-- Game Content -->
    <div class="game-content">
        <% if (gameState.currentScreen === 'overworld') { %>
            <!-- Overworld Map -->
            <div class="overworld-section">
                <h3>Overworld Map</h3>
                <div class="map-container">
                    <div class="map-grid" id="map-grid">
                        <!-- Map cards will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        <% } else if (gameState.currentScreen === 'battle') { %>
            <!-- Battle Interface -->
            <div class="battle-section">
                <h3>Battle</h3>
                <div class="battle-container">
                    <div class="enemy-info">
                        <h4><%= gameState.enemy.name %></h4>
                        <div class="enemy-stats">
                            <p><strong>Health:</strong> <%= gameState.enemy.health %>/<%= gameState.enemy.maxHealth %></p>
                            <p><strong>Weapon:</strong> <%= gameState.enemy.weapon %></p>
                        </div>
                    </div>
                    <div class="battle-actions">
                        <button class="btn btn-primary" onclick="drawCards()">Draw Cards</button>
                        <button class="btn btn-secondary" onclick="switchWeapon()">Switch Weapon</button>
                    </div>
                    <div class="hand-container" id="player-hand">
                        <!-- Player's hand will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        <% } else if (gameState.currentScreen === 'event') { %>
            <!-- Event Interface -->
            <div class="event-section">
                <h3><%= gameState.event.title %></h3>
                <div class="event-description">
                    <p><%= gameState.event.description %></p>
                </div>
                <div class="event-actions">
                    <button class="btn btn-primary" onclick="resolveEvent()">Continue</button>
                </div>
            </div>
        <% } else if (gameState.currentScreen === 'shop') { %>
            <!-- Shop Interface -->
            <div class="shop-section">
                <h3>Shop</h3>
                <div class="shop-items">
                    <div class="shop-item">
                        <h5>Heal (10 HP)</h5>
                        <p>Cost: <%= gameState.shop.healCost %> currency</p>
                        <button class="btn btn-primary" onclick="purchaseHeal()">Purchase</button>
                    </div>
                    <div class="shop-item">
                        <h5>Remove Card</h5>
                        <p>Cost: <%= gameState.shop.cardRemovalCost %> currency</p>
                        <button class="btn btn-primary" onclick="purchaseCardRemoval()">Purchase</button>
                    </div>
                    <% gameState.shop.equipment.forEach(item => { %>
                    <div class="shop-item">
                        <h5><%= item.name %></h5>
                        <p><%= item.description %></p>
                        <p>Cost: <%= item.cost %> currency</p>
                        <button class="btn btn-primary" onclick="purchaseEquipment('<%= item.id %>')">Purchase</button>
                    </div>
                    <% }); %>
                </div>
                <div class="shop-actions">
                    <button class="btn btn-secondary" onclick="leaveShop()">Leave Shop</button>
                </div>
            </div>
        <% } %>
    </div>

    <!-- Card Modal -->
    <div class="modal fade" id="cardModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Card Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="card-details" id="card-details">
                        <!-- Card details will be populated by JavaScript -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Equipment Selection Modal -->
    <div class="modal fade" id="equipmentModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Select Equipment</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6>Weapons</h6>
                            <div class="equipment-list" id="weapon-list">
                                <!-- Weapons will be populated by JavaScript -->
                            </div>
                        </div>
                        <div class="col-md-6">
                            <h6>Armor</h6>
                            <div class="equipment-list" id="armor-list">
                                <!-- Armor will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="confirmEquipmentSelection()">Confirm</button>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
window.gameState = <%- JSON.stringify(gameState) %>;
</script>
<script type="module" src="/js/game.js"></script> 